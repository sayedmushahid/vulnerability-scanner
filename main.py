import os
from Web_Scanner import web_scan


def nmap_scan():
    command = "nmap " + host + " -o " + path +"/nmap.txt"
    os.system(command)

def http_ports_grab(path):
    command = "awk '/http/' " + path + "/nmap.txt | awk '{print $1}' | grep -o '[0-9]\+' > " + path + "/http_ports.txt"
    os.system(command)
    http_open_ports = []
    with open(path + '/http_ports.txt') as my_file:
        for line in my_file:
            http_open_ports.append(line.rstrip('\n'))
    if http_open_ports == '':
        print("No web Ports seems open")
    else:
        for i in http_open_ports:
            web_scan(host,i,path)

def make_dir(path):
    if not os.path.exists(path):
        os.mkdir(path)

if __name__ == '__main__':
    host = "vegacyberlabs.com"
    path = host + "_Enum"
    make_dir(path)
    # nmap_scan()
    http_ports_grab(path)

